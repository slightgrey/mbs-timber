{# 
  Category Card Component
  
  Parameters:
  - category: WP_Term object for the category
  - is_preview: boolean - whether this is in editor preview mode (default: false)
#}

{% set is_preview = is_preview is defined ? is_preview : false %}

{% if category %}
    <div class="category-card group">
        {% if is_preview %}
            <div class="pointer-events-none">
        {% else %}
            <a href="{{ function('get_term_link', category.term_id, 'product_cat') }}" class="block">
        {% endif %}
            <!-- Category Image -->
            {% set category_image_id = function('get_term_meta', category.term_id, 'thumbnail_id', true) %}
            {% if category_image_id %}
                {% set category_image = function('wp_get_attachment_image_src', category_image_id, 'medium') %}
                {% if category_image %}
                    <div class="aspect-square overflow-hidden bg-gray-100 mb-4 rounded-lg">
                        <img src="{{ category_image[0] }}" 
                             alt="{{ category.name }}"
                             class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                    </div>
                {% endif %}
            {% else %}
                <div class="aspect-square bg-gray-100 mb-4 rounded-lg flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                </div>
            {% endif %}
            
            <!-- Category Name -->
            <h3 class="text-lg font-semibold text-gray-900 text-center {% if not is_preview %}group-hover:text-yellow-400 transition-colors{% endif %}">
                {{ category.name }}
            </h3>
        {% if is_preview %}
            </div>
        {% else %}
            </a>
        {% endif %}
    </div>
{% endif %}